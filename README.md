# СИСТЕМА ПОИСКА ИНФОРМАЦИИ НА ВЕБ-САЙТАХ

**Цель проекта**: создать упрощённую open-source систему поиска по сайтам, для возможности её интегрирования в приложения.

**Краткое описание**: приложение позволяет выводить список отсортированных релевантных страниц, согласно введённому пользователем запросу. Поиск осуществляет по заранее проиндексированным сайтам.
Индексация выполняется в многопоточном режиме, сохраняя данные в базу данных (БД). По проиндексированным сайтам выводится удобочитабельная статистика. Имеется возможность индексации 
русскоязычных и англоязычных сайтов. Также имеется возможность индексации как сайтов целиком, так и их отдельных страниц.

## Используемые технологии:
1. org.springframework.boot
2. projectlombok
3. mysql-connector
4. org.jsoup
5. lucene.morphology
6. lucene.analysis

## Проблемы:
1. Отсутствие возможности корректного индексирования англо-русских слов по типу "D-тип".

## Идеи для будущих реализаций:
1. Улучшить оформление главной страницы локального сайта.
2. Реализовать систему проверки корректности данных проиндексированных сайтов.
3. Поставить сайт на хостинг и реализовать систему логирования пользователей.
   
## Запуск проекта:
1. Склонировать проект через git командой: `git clone https://github.com/RiN-wq/final-project.git`.
2. Запустить СУБД и создать отдельную схему (базу данных).
3. В папке "resources" склонированного проекта открыть файл "application.yaml", в котором у ключа "**datasource**" изменить значения полей "_username_", "_password_" и
   "_url_", которые будут необходимы для доступа к ранее созданной БД.
> [!WARNING]
> Изменяя поле "_url_" ключа "**datasource**", необходимо убедиться, что не были удалены следующие за ссылкой параметры.

![image](https://github.com/RiN-wq/final-project/assets/130254226/4cd44399-6530-41f6-8001-ce5105d5586e)

4. В файле "application.yaml" из п.3, у ключа "**sites**" необходимо изменить значения полей "_url_" и "_name_", тем самым составляя список сайтов, которые будут
   индексироваться системой.
   
![image](https://github.com/RiN-wq/final-project/assets/130254226/bc15c944-9233-440d-b68f-016d61d47762)
   
5. Запустить выполнение кода кнопкой "run" в среде разработки.
6. Запустить локальный сайт по адресу "localhost:**PORT**/" [^1][^2].
   [^1]: Базово указанный порт "PORT" = 8080.
   [^2]: В случае возникновения ошибок - изменить используемый порт в поле "_port_" у ключа "**server**" в файле, указанном в п.3 и п.4 или завершить процессы,
   использующий базовый порт. Проверить занятые порты можно командой "netstat -ab" в командной строке ОС.
7. Наслаждаться :relaxed:

## Как пользоваться:
> [!IMPORTANT]
> Основные взаимодействия с приложениям происходят через локальный сайт по адресу "localhost:**PORT**/".

> [!NOTE]
> В строках "аналог в формате JSON" указаны ссылки, с использованием базового порта - 8080.
1. Вывод статистики. Перейдя по вкладе "**DASHBOARD**", автоматически выводится общая статистика количества проиндексированных сайтов, а также статус индексации для каждого сайта.
  * Аналог в формате JSON по ссылке: localhost:8080/api/statistics
![image](https://github.com/RiN-wq/final-project/assets/130254226/1822e051-e1b3-4184-8e1c-5d0217719166)
2. Запуск индексации. На вкладе "**MANAGEMENT**" появляется возможность запуска:
    - полной индексации всех сайтов, нажав кнопку "START INDEXING".
    - постраничной индексации. Для этого необходимо ввести адрес страницы в поле "Add/update page:" и нажать кнопку "APP/UPDATE".
  * Аналог в формате JSON по ссылкам:
  - запуск индексации всех сайтов: localhost:8080/api/startIndexing
  - запуск индексации страницы: localhost:8080/api/indexPage [^3]
[^3]: В теле запроса необходимо передать параметр "path" с ссылкой на страницу.

![image](https://github.com/RiN-wq/final-project/assets/130254226/71deb0ff-1241-4c08-964b-e71491b9edc1)
> [!CAUTION]
> При запуске индексации сайта или страницы, ранее добавленные данные сайта или страницы будут удалены из БД.
3. Выполнение поиска. На вкладе "**SEARCH**" появляется возможность выполнить поиск по отдельному сайту или по всем указанным сайтам. Для этого необходимо:
    - во всплывающем списке выбрать, по какому сайту выполнять поиск. В случае выполнения поиска по всем сайтам, выбрать пункт "All sites".
    - ввести запрос в текстовой поле ниже.
    - нажать кнопку "**SEARCH**".
  * Аналог в формате JSON по ссылке: localhost:8080/api/search?query=ЗАПРОС&offset=КОЛИЧЕСТВО ПРОПУСКАЕМЫХ СТРАНИЦ[^4]&limit=ЛИМИТ ВЫВОДИМЫХ СТРАНИЦ[^5]&site=ССЫЛКА НА САЙТ[^6]
[^4]: Определяет количество страниц, что будет пропущено от начала списка, полученного согласно результату запроса. По умолчанию offset = 0.
[^5]: Определяет ограничение на максимальное количество выводимых страниц из полученного списка, согласно результату запросу. По умолчанию limit = 10.
[^6]: Определяет, по какому из проиндексированных сайтов будет производиться поиск по указанному запросу. В случае поиска по всем сайтам (из списка файла "application.yaml)" - необходимо удалить данный параметр.

![image](https://github.com/RiN-wq/final-project/assets/130254226/278d7ad1-0e2d-4199-8ce2-68c87dc5559c)
4. Остановка индексации сайта или страницы. Остановка индексации сайта или страницы производится с помощью перехода по ссылке: "localhost:8080/api/stopIndexing".
Ответ приходит в формате JSON.
